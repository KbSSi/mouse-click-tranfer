# 🔧 Chrome 插件故障排除指南

## ✅ Service Worker 错误已修复

### 问题描述
- **错误**: Service worker registration failed. Status code: 15
- **原因**: 原始 background.js 使用了不兼容的 API 或权限配置

### 🛠️ 解决方案

1. **简化了 Service Worker**
   - 移除了复杂的右键菜单功能
   - 简化了权限配置
   - 优化了错误处理

2. **修正了权限配置**
   ```json
   "permissions": [
     "activeTab",
     "storage"
   ]
   ```

3. **优化了 background.js**
   - 移除了 `contextMenus` API 调用
   - 简化了异步处理逻辑
   - 添加了更好的错误处理

## 🚀 现在可以正常安装

### 安装步骤
1. 打开 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `extension-build` 目录
5. 插件应该成功加载！

### 验证安装
- 插件图标应该出现在工具栏中
- 点击插件图标应该显示弹窗界面
- 浏览器控制台不应该有错误信息

## 🎯 功能测试

### 基本功能
1. **时间戳转换**
   - 选中时间戳（如：1640995200）
   - 左键点击
   - 应该显示转换结果

2. **文本翻译**
   - 选中英文文本（如：Hello World）
   - 右键点击
   - 应该显示翻译结果

3. **插件弹窗**
   - 点击工具栏图标
   - 可以手动输入时间戳或文本进行转换

### 测试页面
使用 `extension-build/demo.html` 进行功能测试

## 🔍 常见问题

### Q: 插件安装后没有反应？
**A**: 检查以下几点：
- 确保已开启"开发者模式"
- 刷新测试页面
- 检查浏览器控制台是否有错误

### Q: 选中文本后没有反应？
**A**:
- 确保选中的是有效的时间戳（10位或13位数字）
- 确保选中的是英文文本
- 检查内容脚本是否正常加载

### Q: 弹窗界面无法打开？
**A**:
- 检查 popup.html 和 popup.js 是否存在
- 查看浏览器控制台的错误信息
- 尝试重新加载插件

## 📝 调试技巧

### 1. 查看 Service Worker 日志
1. 打开 `chrome://extensions/`
2. 找到插件，点击"检查视图"中的"Service Worker"
3. 查看控制台日志

### 2. 查看内容脚本日志
1. 在测试页面按 F12 打开开发者工具
2. 查看 Console 标签页
3. 查找插件相关的日志信息

### 3. 检查权限
确保 manifest.json 中的权限配置正确：
```json
{
  "permissions": ["activeTab", "storage"],
  "host_permissions": ["http://*/*", "https://*/*"]
}
```

## 🎉 成功标志

插件正常工作时应该看到：
- ✅ 插件图标出现在工具栏
- ✅ 点击图标显示弹窗界面
- ✅ 选中文本后有工具提示
- ✅ 左键/右键点击有相应反应
- ✅ 控制台没有错误信息

---

**状态**: 问题已解决 ✅
**版本**: 简化版 v1.0
**兼容性**: Chrome Manifest V3 ✅
